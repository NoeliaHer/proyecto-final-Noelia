---
import Button from "./ui/button.astro";
---

<form
  action="javascript:void(0)"
  method="POST"
  id="form"
  class="needs-validation"
  novalidate>
  <input type="hidden" name="access_key" value="TU_CLAVE_DE_ACCESO_AQUÍ" />
  <input type="checkbox" class="hidden" style="display:none" name="botcheck" />

  <div class="mb-5">
    <label for="email_address" class="sr-only">Correo electrónico</label>
    <input
      id="email_address"
      type="email"
      placeholder="Dirección de Correo Electrónico"
      name="email"
      class="w-full px-4 py-3 border-2 placeholder:text-gray-800 rounded-md outline-none focus:ring-4 border-gray-300 focus:border-gray-600 ring-gray-100"
      />
    <div id="email_feedback" class="empty-feedback invalid-feedback text-red-400 text-sm mt-1">
      Por favor introduce un correo electrónico válido.
    </div>
  </div>
  <div class="mb-5">
    <input
      type="password"
      placeholder="Contraseña"
      name="password"
      class="w-full px-4 py-3 border-2 placeholder:text-gray-800 rounded-md outline-none focus:ring-4 border-gray-300 focus:border-gray-600 ring-gray-100"
    />
    <div id="password_feedback" class="empty-feedback invalid-feedback text-red-400 text-sm mt-1">
      Por favor introduce la contraseña.
    </div>
  </div>
 
  <button type="submit" size="lg" class="w-full px-4 py-3 bg-black text-white rounded-md focus:bg-grey-700 focus:outline-none">Acceder</button>
  <div id="result" class="mt-3 text-center"></div>
</form>

<script>
  // Remove red border and error messages when the page loads
  window.onload = function() {
    document.getElementById("email_address").classList.remove("border-red-500");
    document.getElementById("email_feedback").textContent = "";
    document.getElementsByName("password")[0].classList.remove("border-red-500");
    document.getElementById("password_feedback").textContent = "";
  };

  // Manejo del evento de envío del formulario
  document.getElementById("form").addEventListener("submit", function(event) {
    // Validación de los campos del formulario
    var emailField = document.getElementById("email_address");
    var passwordField = document.getElementsByName("password")[0];

    // Verificar si los campos están vacíos
    if (emailField.value.trim() === "") {
      event.preventDefault();
      document.getElementById("email_feedback").textContent = "Por favor introduce tu correo electrónico.";
      emailField.classList.add("border-red-500");
    } else {
      document.getElementById("email_feedback").textContent = "";
      emailField.classList.remove("border-red-500");
    }

    if (passwordField.value.trim() === "") {
      event.preventDefault();
      document.getElementById("password_feedback").textContent = "Por favor introduce la contraseña.";
      passwordField.classList.add("border-red-500");
    } else {
      document.getElementById("password_feedback").textContent = "";
      passwordField.classList.remove("border-red-500");
    }

    if (emailField.value.trim() !== "" && passwordField.value.trim() !== "") {
      window.location.href = "/portal-personal";
    }
  });
</script>


